import sys
import requests
import socket
import json

#We are first checking the input that the user provides on the terminal then provides the usage for the script
#how does the sys class work and what the hell is argv??
if len(sys.argv) < 2:
    print("Usage:" + sys.argv[0] + "<url>") #argv[0] is the name of the script
    sys.exit(1)

#we make a https get request to the provided argument argv[1]
req =  requests.get("https://"+ sys.argv[1])

#print the headers on a new lin
print("\n" + str(req.headers))

#we use the sockets modeule to get the hostname
#inside the module there is a function get host by name which we will use
#we store the output in an instatiated variable
gethostby_ = socket.gethostbyname(sys.argv[1])

#then print it on a new line
print("\nThe IP address of " + sys.argv[1] + " is " + gethostby_ + "\n")

#To get the location of the host, we make a request to the api 'ipinfo.io' that offers such services
#this will be achieved by making another request now to ipinfo.io
#we provide the ip address and state that we want the output  to be in json format

req_two = requests.get("https://ipinfo.io/" + gethostby_ + "/json")

# print(req_two)
# we use the load function to load the response
resp_ = json.loads(req_two.text)

#Then we print what we want to: location,city,region
# print(resp_)
print("\nLocation:" + resp_["loc"])
print("\nRegion:" + resp_["region"])
print("\nCity:" + resp_["city"])
print("\nCountry:" + resp_["country"])



